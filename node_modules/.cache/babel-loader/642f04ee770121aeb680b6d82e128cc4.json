{"ast":null,"code":"var _jsxFileName = \"/home/yta-odoo/Documents/pic/recat practice/expence-tracker/src/store/AuthContext.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/React.createContext({\n  idToken: \"\",\n  email: \"\",\n  onLogin: idToken => {},\n  onLogout: () => {},\n  onResetPassword: tokne => {}\n});\nexport const AuthContextProvider = props => {\n  _s();\n\n  const [idToken, setIdToken] = useState(null);\n  const [email, setEmail] = useState(null);\n  const navigate = useNavigate(); // insted of useEffect we can directly fetch data from local storage,\n  // then set it as initial state of idToken.\n  // this is possible because localstorage is syncronus api\n  // by doing this we are not override any state\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const email = localStorage.getItem('email'); // debugger\n\n    if (token && email) {\n      setIdToken(token);\n      setEmail(email);\n    }\n  }, []);\n\n  const onLogin = (email, idToken) => {\n    setIdToken(idToken);\n    localStorage.setItem('token', idToken);\n    localStorage.setItem('email', email);\n    debugger;\n    navigate('/');\n  };\n\n  const onLogout = () => {\n    setIdToken(null);\n    localStorage.clear();\n    navigate('/auth');\n  };\n\n  const onResetPassword = token => {\n    setIdToken(token);\n    localStorage.setItem('token', idToken);\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      idToken: idToken,\n      email: email,\n      onLogin: onLogin,\n      onLogout: onLogout,\n      onResetPassword: onResetPassword\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 12\n  }, this);\n};\n\n_s(AuthContextProvider, \"S1qK+B/M9Ehyh9yXTNkjwV1uqFQ=\", false, function () {\n  return [useNavigate];\n});\n\n_c = AuthContextProvider;\nexport default AuthContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"sources":["/home/yta-odoo/Documents/pic/recat practice/expence-tracker/src/store/AuthContext.js"],"names":["React","useState","useEffect","useNavigate","AuthContext","createContext","idToken","email","onLogin","onLogout","onResetPassword","tokne","AuthContextProvider","props","setIdToken","setEmail","navigate","token","localStorage","getItem","setItem","clear","children"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,WAAT,QAA4B,kBAA5B;;AAEA,MAAMC,WAAW,gBAAGJ,KAAK,CAACK,aAAN,CAAoB;AACpCC,EAAAA,OAAO,EAAE,EAD2B;AAEpCC,EAAAA,KAAK,EAAC,EAF8B;AAGpCC,EAAAA,OAAO,EAAGF,OAAD,IAAa,CAAE,CAHY;AAIpCG,EAAAA,QAAQ,EAAE,MAAO,CAAE,CAJiB;AAKpCC,EAAAA,eAAe,EAAGC,KAAD,IAAW,CAAE;AALM,CAApB,CAApB;AAQA,OAAO,MAAMC,mBAAmB,GAAIC,KAAD,IAAW;AAAA;;AAC1C,QAAM,CAACP,OAAD,EAAUQ,UAAV,IAAwBb,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACM,KAAD,EAAQQ,QAAR,IAAoBd,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAMe,QAAQ,GAAGb,WAAW,EAA5B,CAH0C,CAK1C;AACA;AACA;AACA;;AACAD,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMe,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,UAAMZ,KAAK,GAAGW,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CAFY,CAGZ;;AACA,QAAIF,KAAK,IAAIV,KAAb,EAAoB;AAChBO,MAAAA,UAAU,CAACG,KAAD,CAAV;AACAF,MAAAA,QAAQ,CAACR,KAAD,CAAR;AACH;AACJ,GARQ,EAQN,EARM,CAAT;;AAUA,QAAOC,OAAO,GAAG,CAACD,KAAD,EAAQD,OAAR,KAAoB;AACjCQ,IAAAA,UAAU,CAACR,OAAD,CAAV;AACAY,IAAAA,YAAY,CAACE,OAAb,CAAqB,OAArB,EAA8Bd,OAA9B;AACAY,IAAAA,YAAY,CAACE,OAAb,CAAqB,OAArB,EAA8Bb,KAA9B;AACA;AACAS,IAAAA,QAAQ,CAAC,GAAD,CAAR;AACH,GAND;;AAQA,QAAMP,QAAQ,GAAG,MAAM;AACnBK,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAI,IAAAA,YAAY,CAACG,KAAb;AACAL,IAAAA,QAAQ,CAAC,OAAD,CAAR;AACH,GAJD;;AAMA,QAAMN,eAAe,GAAIO,KAAD,IAAW;AAC/BH,IAAAA,UAAU,CAACG,KAAD,CAAV;AACAC,IAAAA,YAAY,CAACE,OAAb,CAAqB,OAArB,EAA8Bd,OAA9B;AACH,GAHD;;AAKA,sBAAO,QAAC,WAAD,CAAa,QAAb;AACP,IAAA,KAAK,EAAE;AACHA,MAAAA,OAAO,EAAEA,OADN;AAEHC,MAAAA,KAAK,EAAEA,KAFJ;AAGHC,MAAAA,OAAO,EAAEA,OAHN;AAIHC,MAAAA,QAAQ,EAAEA,QAJP;AAKHC,MAAAA,eAAe,EAAEA;AALd,KADA;AAAA,cASFG,KAAK,CAACS;AATJ;AAAA;AAAA;AAAA;AAAA,UAAP;AAWH,CAjDM;;GAAMV,mB;UAGQT,W;;;KAHRS,mB;AAkDb,eAAeR,WAAf","sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom';\n\nconst AuthContext = React.createContext({\n    idToken: \"\",\n    email:\"\",\n    onLogin: (idToken) => {},\n    onLogout: () =>  {},\n    onResetPassword: (tokne) => {},\n})\n\nexport const AuthContextProvider = (props) => {\n    const [idToken, setIdToken] = useState(null);\n    const [email, setEmail] = useState(null);\n    const navigate = useNavigate();\n\n    // insted of useEffect we can directly fetch data from local storage,\n    // then set it as initial state of idToken.\n    // this is possible because localstorage is syncronus api\n    // by doing this we are not override any state\n    useEffect(() => {\n        const token = localStorage.getItem('token');\n        const email = localStorage.getItem('email');\n        // debugger\n        if (token && email) {\n            setIdToken(token);\n            setEmail(email);\n        }\n    }, []);\n\n    const  onLogin = (email, idToken) => {\n        setIdToken(idToken);\n        localStorage.setItem('token', idToken);\n        localStorage.setItem('email', email);\n        debugger\n        navigate('/');\n    };\n\n    const onLogout = () => {\n        setIdToken(null);\n        localStorage.clear();\n        navigate('/auth');\n    };\n\n    const onResetPassword = (token) => {\n        setIdToken(token);\n        localStorage.setItem('token', idToken);\n    };\n\n    return <AuthContext.Provider\n    value={{\n        idToken: idToken,\n        email: email,\n        onLogin: onLogin,\n        onLogout: onLogout,\n        onResetPassword: onResetPassword\n    }}\n    >\n        {props.children}\n    </AuthContext.Provider>\n}\nexport default AuthContext;"]},"metadata":{},"sourceType":"module"}