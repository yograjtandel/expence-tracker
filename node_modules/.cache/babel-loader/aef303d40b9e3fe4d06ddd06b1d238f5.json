{"ast":null,"code":"import _asyncToGenerator from\"/home/yta-odoo/Documents/pic/recat practice/expence-tracker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/home/yta-odoo/Documents/pic/recat practice/expence-tracker/node_modules/@babel/runtime/regenerator/index.js\";import{useEffect}from\"react\";import{useDispatch}from\"react-redux\";import Expence from\"../components/Expences/Expence\";import NewExpense from\"../components/Expences/NewExpense\";import{ExpencesAction}from\"../store/expences-slice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function HomePage(){var dispatch=useDispatch();useEffect(function(){if(!localStorage.getItem('userId')){fetch(\"https://expencetracker-b3897-default-rtdb.firebaseio.com/users.json?orderBy=\\\"email\\\"&equalTo=\\\"\".concat(localStorage.getItem('email'),\"\\\"&print=pretty\")).then(function(res){if(res.ok){res.json().then(function(data){dispatch(ExpencesAction.addUserId(Object.keys(data)[0]));});}else{alert(\"something went wrong\");}});}var FetchExpences=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:debugger;_context.next=3;return fetch(\"https://expencetracker-b3897-default-rtdb.firebaseio.com/users/\".concat(localStorage.getItem('userId'),\".json\"));case 3:return _context.abrupt(\"return\",_context.sent);case 4:case\"end\":return _context.stop();}}},_callee);}));return function FetchExpences(){return _ref.apply(this,arguments);};}();FetchExpences().then(function(res){res.json().then(function(data){delete data.email;var Expences=[];for(var item in data){var expence={};expence['id']=item;for(var key in data[item]){expence[key]=data[item][key];}Expences.push(expence);}dispatch(ExpencesAction.updateExpence(Expences));// updateExpence(Expences.expences)\n});});},[dispatch]);var expense=function addExpence(newexpence){// DUMMY_EXPENSES.push(newexpence)\n// updateExpence((previousExpence) => {\n//   return [newexpence, ...previousExpence];\n// });\n};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NewExpense,{addExpence:expense}),/*#__PURE__*/_jsx(Expence,{})]});}export default HomePage;","map":{"version":3,"sources":["/home/yta-odoo/Documents/pic/recat practice/expence-tracker/src/pages/HomePage.js"],"names":["useEffect","useDispatch","Expence","NewExpense","ExpencesAction","HomePage","dispatch","localStorage","getItem","fetch","then","res","ok","json","data","addUserId","Object","keys","alert","FetchExpences","email","Expences","item","expence","key","push","updateExpence","expense","addExpence","newexpence"],"mappings":"qSAAA,OAASA,SAAT,KAA0B,OAA1B,CACA,OAASC,WAAT,KAA4B,aAA5B,CAEA,MAAOC,CAAAA,OAAP,KAAoB,gCAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,mCAAvB,CACA,OAASC,cAAT,KAA+B,yBAA/B,C,wFAEA,QAASC,CAAAA,QAAT,EAAoB,CAClB,GAAMC,CAAAA,QAAQ,CAAGL,WAAW,EAA5B,CAEAD,SAAS,CAAC,UAAM,CACd,GAAI,CAACO,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAL,CAAoC,CAClCC,KAAK,2GAC6FF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAD7F,oBAAL,CAEEE,IAFF,CAEO,SAAAC,GAAG,CAAI,CACZ,GAAGA,GAAG,CAACC,EAAP,CAAU,CACRD,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgB,SAAAI,IAAI,CAAI,CACtBR,QAAQ,CAACF,cAAc,CAACW,SAAf,CAAyBC,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkB,CAAlB,CAAzB,CAAD,CAAR,CACD,CAFD,EAGD,CAJD,IAKK,CACHI,KAAK,CAAC,sBAAD,CAAL,CACD,CACF,CAXD,EAYD,CACD,GAAMC,CAAAA,aAAa,0FAAG,mIACpB,SADoB,sBAEPV,CAAAA,KAAK,0EACkDF,YAAY,CAACC,OAAb,CAAqB,QAArB,CADlD,UAFE,6GAAH,kBAAbW,CAAAA,aAAa,0CAAnB,CAMAA,aAAa,GAAGT,IAAhB,CAAqB,SAACC,GAAD,CAAS,CAC5BA,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgB,SAACI,IAAD,CAAU,CACxB,MAAOA,CAAAA,IAAI,CAACM,KAAZ,CACA,GAAMC,CAAAA,QAAQ,CAAG,EAAjB,CACA,IAAM,GAAMC,CAAAA,IAAZ,GAAoBR,CAAAA,IAApB,CAA0B,CACxB,GAAMS,CAAAA,OAAO,CAAG,EAAhB,CACAA,OAAO,CAAC,IAAD,CAAP,CAAgBD,IAAhB,CACA,IAAI,GAAME,CAAAA,GAAV,GAAiBV,CAAAA,IAAI,CAACQ,IAAD,CAArB,CAA6B,CACzBC,OAAO,CAACC,GAAD,CAAP,CAAeV,IAAI,CAACQ,IAAD,CAAJ,CAAWE,GAAX,CAAf,CACH,CACDH,QAAQ,CAACI,IAAT,CAAcF,OAAd,EACD,CACDjB,QAAQ,CAACF,cAAc,CAACsB,aAAf,CAA6BL,QAA7B,CAAD,CAAR,CACA;AACD,CAbD,EAcD,CAfD,EAgBD,CArCQ,CAqCN,CAACf,QAAD,CArCM,CAAT,CAuCA,GAAMqB,CAAAA,OAAO,CAAG,QAASC,CAAAA,UAAT,CAAoBC,UAApB,CAAgC,CAC9C;AACA;AACA;AACA;AACD,CALD,CAOA,mBACE,oCACE,KAAC,UAAD,EAAY,UAAU,CAAEF,OAAxB,EADF,cAEE,KAAC,OAAD,IAFF,GADF,CAMD,CAED,cAAetB,CAAAA,QAAf","sourcesContent":["import { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\n\nimport Expence from \"../components/Expences/Expence\";\nimport NewExpense from \"../components/Expences/NewExpense\";\nimport { ExpencesAction } from \"../store/expences-slice\";\n\nfunction HomePage() {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!localStorage.getItem('userId')){\n      fetch(\n        `https://expencetracker-b3897-default-rtdb.firebaseio.com/users.json?orderBy=\"email\"&equalTo=\"${localStorage.getItem('email')}\"&print=pretty`\n      ).then(res => {\n        if(res.ok){\n          res.json().then(data => {\n            dispatch(ExpencesAction.addUserId(Object.keys(data)[0]));\n          })\n        }\n        else {\n          alert(\"something went wrong\");\n        }\n      });\n    }\n    const FetchExpences = async () => {\n      debugger\n      return await fetch(\n        `https://expencetracker-b3897-default-rtdb.firebaseio.com/users/${localStorage.getItem('userId')}.json`\n      );\n    };\n    FetchExpences().then((res) => {\n      res.json().then((data) => {\n        delete data.email;\n        const Expences = [];\n        for ( const item in data) {\n          const expence = {}\n          expence['id'] = item;\n          for(const key in data[item]) {\n              expence[key] = data[item][key]\n          }\n          Expences.push(expence);\n        }\n        dispatch(ExpencesAction.updateExpence(Expences));\n        // updateExpence(Expences.expences)\n      });\n    });\n  }, [dispatch]);\n\n  const expense = function addExpence(newexpence) {\n    // DUMMY_EXPENSES.push(newexpence)\n    // updateExpence((previousExpence) => {\n    //   return [newexpence, ...previousExpence];\n    // });\n  };\n\n  return (\n    <div>\n      <NewExpense addExpence={expense} />\n      <Expence/>\n    </div>\n  );\n}\n\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}